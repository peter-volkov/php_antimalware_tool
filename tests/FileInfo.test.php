<?php

    $base = dirname(dirname(__FILE__));
    require_once $base . '/classes/FileInfo.inc.php';

class FileInfoTest extends PHPUnit_Framework_TestCase {
    public function __construct() {
        $test_filename = 'test_file.txt';
        $this->fileinfo = new FileInfo($test_filename);
    }
    public function testGetInfoByName() {
        $correct_result = "test_file.txt;6;1384182914;1384182951;1000;33204;13d9178c;7f84a974;a8f5f167f44f4964e6c998dee827110c;70ea5cb5c98d1705acc6692cec1217e1";
        $this->assertEquals($this->fileinfo, $correct_result);
    }
    public function testXML() {
        $dom = new DOMDocument("1.0", "utf-8");
        $dom->formatOutput = true;
        $files_node = $dom->createElement("files");
        $node = $this->fileinfo->getXMLNode();
        $files_node->appendChild($dom->importNode($node, true));
        $dom->appendChild($files_node);
        $this->assertEquals($dom->saveXML(), file_get_contents('test_file.xml'));
    }
}

?>