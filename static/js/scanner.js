$(document).ready(function(){  

	function handleResponse(jsonString) {
		response = $.parseJSON(jsonString);
		console.log(response);
	}

	function getFileList() {

		$.getJSON("index.php?controller=scanner&a=getFileListPrepare&delay=5", function(responseJSON) {  
           if (responseJSON.meta.type == 'error')
           { 
               console.log('server ' + responseJSON.meta.type);
               console.log('server ' + responseJSON.data);
           }
		   
		})
		  .fail(function() {
			console.log("ajax error");
		  })
		  .always(function() {
			//console.log("complete");
		  });
	}
	 	
	$("#startButton").click(function() {
      spinner = $('#spinner_gif');
	  if (!spinner.is(":visible")) {   
		spinner.show();
        $(this).attr('value', PT_STR_BUTTON_CANCEL);
		console.log("getFileList");
        getFileList();
	  } else {
		spinner.hide();
        $(this).attr('value', PT_STR_SEARCH_AGAIN_BUTTON);
		console.log("canceled");
	 } 
	});


	$("#settingsLink").click(function() {        
	    if ($('#configPanel').is(":visible")) { 
		    $('#configPanel').hide();

        } else {
            $('#configPanel').show();
        }        
	 } 
	);




});
