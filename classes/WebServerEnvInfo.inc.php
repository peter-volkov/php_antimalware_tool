<?php

class WebServerEnvInfo
{	

	public function __construct()    
	{        
        $this->script_filename = $_SERVER["SCRIPT_FILENAME"];
        $this->document_root = $_SERVER["DOCUMENT_ROOT"];
        $this->http_host = $_SERVER["HTTP_HOST"];
        $this->admin_email = $_SERVER["SERVER_ADMIN"];
        $this->time = date("Y.m.d H:i:s", $_SERVER["REQUEST_TIME"]);		
	}

	public function getXMLNode()
	{   
        $dom = new DOMDocument("1.0", "utf-8");

		$server_env_node = $dom->createElement("server_environment");
		$server_env_node->appendChild($dom->createElement("script_filename",$this->script_filename));
		$server_env_node->appendChild($dom->createElement("document_root",$this->document_root));
		$server_env_node->appendChild($dom->createElement("http_host",$this->http_host));
		$server_env_node->appendChild($dom->createElement("admin_email",$this->admin_email));
		$server_env_node->appendChild($dom->createElement("time",$this->time));

        $dom->appendChild($server_env_node);

        return $dom->getElementsByTagName("server_environment")->item(0);
	}


		
	public function __toString()
	{   
        $data = array($this->script_filename, $this->document_root, $this->http_host, $this->admin_email, $this->time);    
		return implode(';', $data);
	}

}